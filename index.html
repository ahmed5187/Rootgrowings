<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RootGrowings</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b6b2f">
  <style>
    * { box-sizing: border-box; }
    :root { --green:#0b6b2f; --green2:#2e7d4e; --bg:#f6f8f7; --ink:#0b2d18; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background: var(--bg); color: var(--ink); }
    header { position: sticky; top: 0; background: var(--bg); padding: 8px 12px; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e2eee7; z-index: 3; }
    header img.logo { width: 28px; height: 28px; border-radius: 6px; }
    header .spacer { flex: 1; }
    .fab { position: fixed; top: 10px; right: 12px; width: 44px; height: 44px; border-radius: 999px; background: var(--green); color: #fff; border: 0; font-size: 28px; line-height: 44px; text-align: center; cursor: pointer; z-index: 4; display:block; }
    main { padding: 10px 12px 92px; max-width: 860px; margin: 0 auto; }
    h1.title { margin: 6px 2px 8px; font-size: 22px; font-weight: 800; color: var(--green); letter-spacing: .3px; }
    .section { margin: 10px 0 18px; }
    .section h3 { margin: 10px 4px; font-size: 15px; color: #4a7c63; font-weight: 800; display:flex; align-items:center; gap:8px; }
    .roomIcon { width: 18px; height:18px; display:inline-grid; place-items:center; background:#eaf5ef; border-radius:6px; font-size:12px; }
    .group { background: #eaf5ef; border-radius: 16px; padding: 10px; }
    .row { display: grid; grid-template-columns: repeat(auto-fill,minmax(160px,1fr)); gap: 10px; }
    .card { background: #fff; border-radius: 16px; padding: 10px; box-shadow: 0 2px 10px rgba(0,0,0,.05); display: grid; gap: 8px; align-content: start; position: relative; }
    .photoWrap { position: relative; }
    .photo { width: 100%; aspect-ratio: 1/1; border-radius: 12px; background: #e8efe9 center/cover no-repeat; }
    .ring { position: absolute; top: 8px; left: 8px; width: 42px; height: 42px; border-radius: 50%; background: conic-gradient(var(--green2) var(--pct), #e5ece7 0); display: grid; place-items: center; font-size: 11px; font-weight: 700; color: var(--green); }
    .ring span { background: #fff; width: 30px; height: 30px; border-radius: 50%; display: grid; place-items: center; }
    .gear { position:absolute; top: 8px; right: 8px; width: 28px; height: 28px; border-radius: 50%; border:0; background:#ffffffcc; display:grid; place-items:center; cursor:pointer; }
    .gear svg { width: 16px; height:16px; color:#4a7c63; }
    .name { font-weight: 800; font-size: 14px; }
    .nick { color: #46795b; font-size: 12px; }
    .meta { font-size: 11px; color: #355747; }
    .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .btn { border: 0; padding: 8px; border-radius: 10px; cursor: pointer; font-weight: 700; }
    .btn.primary { background: var(--green); color:#fff; }
    .btn.ghost { background: #eef4f0; color: var(--ink); }
    .empty { text-align: center; color: #507a65; padding: 40px 10px; }
    nav { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; border-top: 1px solid #e2eee7; display: grid; grid-template-columns: repeat(3,1fr); padding: 8px 10px; z-index: 5; }
    nav button { background: transparent; border: 0; padding: 8px; font-size: 12px; color: #4a7c63; display: grid; place-items: center; gap: 4px; cursor: pointer; }
    .navIcon { width: 22px; height: 22px; }
    .active { color: var(--green); font-weight: 800; }
    .page { display: none; }
    .page.active { display: block; }
    .settings { display: grid; gap: 12px; }
    .row2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    input, select { width: 100%; padding: 10px; border: 1px solid #cfe0d6; border-radius: 8px; }
    label { font-size: 12px; color: #355747; }
    .btnRow { display:flex; gap:10px; flex-wrap:wrap; }
    dialog { border: 0; border-radius: 12px; width: min(520px, 92vw); }
    menu { display: flex; justify-content: end; gap: 8px; }
    .iconGrid { display:grid; grid-template-columns: repeat(8, 1fr); gap:8px; }
    .iconPick { border:1px solid #cfe0d6; border-radius:8px; padding:6px; cursor:pointer; background:#fff; }
    .iconPick.selected { outline:2px solid var(--green); }
  </style>
</head>
<body>
  <header>
    <img class="logo" src="icons/icon-192.png" alt="RootGrowings">
    <div class="spacer"></div>
  </header>
  <button class="fab" id="plusBtn">+</button>

  <main>
    <h1 class="title" id="homeTitle">My Plants</h1>
    <section id="homePage" class="page active">
      <div id="homeContent"></div>
      <div class="empty" id="homeEmpty" hidden>
        Add your first plant from the plus button then come back here.
      </div>
    </section>

    <h1 class="title" id="settingsTitle" style="display:none">My Settings</h1>
    <section id="settingsPage" class="page">
      <div class="settings">
        <h3>Rooms</h3>
        <div class="btnRow">
          <button class="btn primary" id="btnAddRoom">Add a Room</button>
          <button class="btn ghost" id="btnEditRoom">Edit a Room</button>
          <button class="btn ghost" id="btnRemoveRoom">Remove a Room</button>
        </div>

        <h3>Plants</h3>
        <div class="btnRow">
          <button class="btn primary" id="btnAddPlant">Add a Plant</button>
          <button class="btn ghost" id="btnEditPlant">Edit a Plant</button>
          <button class="btn ghost" id="btnRemovePlant">Remove a Plant</button>
        </div>
      </div>
    </section>

    <section id="chatPage" class="page">
      <div class="empty">
        Chat with us is coming soon!
      </div>
    </section>
  </main>

  <nav>
    <button id="navSettings">
      <svg class="navIcon" viewBox="0 0 24 24"><path d="M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm9.4 4a7.4 7.4 0 0 0-.1-1l2-1.6-2-3.5-2.4 1a7.5 7.5 0 0 0-1.7-1l-.4-2.6H9.2l-.4 2.6c-.6.2-1.2.5-1.7 1l-2.4-1-2 3.5 2 1.6a7.4 7.4 0 0 0-.1 1c0 .3 0 .7.1 1l-2 1.6 2 3.5 2.4-1c.5.4 1.1.7 1.7 1l.4 2.6h5.6l.4-2.6c.6-.2 1.2-.5 1.7-1l2.4 1 2-3.5-2-1.6c.1-.3.1-.6.1-1Z" fill="currentColor"/></svg>
      <span>Settings</span>
    </button>
    <button id="navHome" class="active">
      <svg class="navIcon" viewBox="0 0 24 24"><path d="M12 3 2 11h3v10h6V15h2v6h6V11h3L12 3Z" fill="currentColor"/></svg>
      <span>Home</span>
    </button>
    <button id="navChat">
      <svg class="navIcon" viewBox="0 0 24 24"><path d="M4 4h16v10H7l-3 3V4Z" fill="currentColor"/></svg>
      <span>Chat</span>
    </button>
  </nav>

  <!-- Add/Edit plant dialog -->
  <dialog id="plantDialog">
    <form id="plantForm" method="dialog">
      <h3 id="plantDialogTitle">Add plant</h3>
      <div class="row2">
        <div>
          <label>Name</label>
          <input name="name" required placeholder="Monstera">
        </div>
        <div>
          <label>Nickname</label>
          <input name="nickname" placeholder="Mo">
        </div>
      </div>
      <label>Photo</label>
      <input name="photo" type="file" accept="image/*">
      <div class="row2">
        <div>
          <label>Plant type</label>
          <input name="plantType" placeholder="Monstera deliciosa">
        </div>
        <div>
          <label>Room</label>
          <select name="location" id="roomSelect"></select>
        </div>
      </div>
      <div class="row2">
        <div>
          <label>Pot size cm</label>
          <input name="potSize" type="number" min="5" max="40" step="1" value="15">
        </div>
        <div>
          <label>Light level</label>
          <select name="lightLevel">
            <option value="medium">Medium</option>
            <option value="bright">Bright</option>
            <option value="low">Low</option>
          </select>
        </div>
      </div>
      <div class="row2">
        <div>
          <label>Schedule</label>
          <select name="scheduleMode">
            <option value="suggested">Suggested</option>
            <option value="custom">Custom</option>
          </select>
        </div>
        <div>
          <label>Custom interval days</label>
          <input name="customIntervalDays" type="number" min="2" max="60" value="10">
        </div>
      </div>
      <menu>
        <button type="button" id="deletePlantBtn" class="btn ghost" style="margin-right:auto; display:none">Delete</button>
        <button type="button" id="cancelBtn" class="btn ghost">Cancel</button>
        <button type="submit" class="btn primary">Save</button>
      </menu>
    </form>
  </dialog>

  <!-- Add room dialog -->
  <dialog id="addRoomDialog">
    <form id="addRoomForm" method="dialog">
      <h3>Add a Room</h3>
      <label>Room name</label>
      <input name="roomName" required placeholder="Bedroom">
      <label>Choose icon</label>
      <div class="iconGrid" id="iconGrid"></div>
      <menu>
        <button type="button" id="addRoomCancel" class="btn ghost">Cancel</button>
        <button type="submit" class="btn primary">Save</button>
      </menu>
    </form>
  </dialog>

  <!-- Edit room dialog -->
  <dialog id="editRoomDialog">
    <form id="editRoomForm" method="dialog">
      <h3>Edit a Room</h3>
      <label>Select room</label>
      <select name="roomToEdit" id="roomEditSelect"></select>
      <label>New name</label>
      <input name="newRoomName" placeholder="New name">
      <label>Choose new icon</label>
      <div class="iconGrid" id="iconGridEdit"></div>
      <menu>
        <button type="button" id="editRoomCancel" class="btn ghost">Cancel</button>
        <button type="submit" class="btn primary">Save</button>
      </menu>
    </form>
  </dialog>

  <!-- Remove room dialog -->
  <dialog id="removeRoomDialog">
    <form id="removeRoomForm" method="dialog">
      <h3>Remove a Room</h3>
      <label>Select room to remove</label>
      <select name="roomToRemove" id="roomRemoveSelect"></select>
      <p class="meta">Plants in the removed room will move to Unassigned.</p>
      <menu>
        <button type="button" id="removeRoomCancel" class="btn ghost">Cancel</button>
        <button type="submit" class="btn primary">Remove</button>
      </menu>
    </form>
  </dialog>

  <!-- Edit plant chooser dialog -->
  <dialog id="editPlantChooser">
    <form id="editPlantChooserForm" method="dialog">
      <h3>Edit a Plant</h3>
      <label>Select plant</label>
      <select name="plantToEdit" id="plantEditSelect"></select>
      <menu>
        <button type="button" id="editPlantCancel" class="btn ghost">Cancel</button>
        <button type="submit" class="btn primary">Edit</button>
      </menu>
    </form>
  </dialog>

  <!-- Remove plant dialog -->
  <dialog id="removePlantDialog">
    <form id="removePlantForm" method="dialog">
      <h3>Remove a Plant</h3>
      <label>Select plant</label>
      <select name="plantToRemove" id="plantRemoveSelect"></select>
      <menu>
        <button type="button" id="removePlantCancel" class="btn ghost">Cancel</button>
        <button type="submit" class="btn primary">Remove</button>
      </menu>
    </form>
  </dialog>

  <script src="app.js"></script>
</body>
</html>
